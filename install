#!/bin/bash

tag="###chen3feng-devenv###"
this_dir="$(cd $(dirname $0) && pwd)"

install() {
  local command="$1"
  local from="$this_dir/$2"
  local to="$3"
  local comment="$4"
  local stmt="$command $from  $comment $tag"
  if [ -e $to ] && grep "$tag" "$to" > /dev/null; then
    sed -i -e "s|.*$tag.*|$stmt|g" $to
  else
    echo "$stmt" >> $to
  fi
  echo "$to is updated."
}

install source _bashrc ~/.bashrc "#"
install source _zshrc ~/.zshrc "#"
install source _vimrc ~/.vimrc '"'
install "\$include" _inputrc ~/.inputrc "#"

$this_dir/git/install

# Install the `vim-plug` plug manager
curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
